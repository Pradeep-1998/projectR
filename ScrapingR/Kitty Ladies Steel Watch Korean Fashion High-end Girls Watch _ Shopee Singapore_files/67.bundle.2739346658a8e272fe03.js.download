webpackJsonp([67],{1096:function(e,t,r){"use strict";var n=r(20);t.a=Object(n.a)({Icon:r(1104),iconClassNames:["icon-arrow-left"]})},1106:function(e,t,r){"use strict";var n=r(20);t.a=Object(n.a)({Icon:r(1090),iconClassNames:["icon-free-shipping"]})},1486:function(e,t,r){"use strict";t.h=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(!t)return[];return s(e.toLowerCase(),null,t,r-1)},t.g=function(e,t){if(!t)return[];if(!e)return Object.keys(t);var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;if(!t[s])return u;t=t[s]}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return Array.isArray(t)?t:Object.keys(t)},r.d(t,"a",function(){return c}),r.d(t,"b",function(){return l}),r.d(t,"d",function(){return p}),r.d(t,"e",function(){return d}),r.d(t,"c",function(){return f}),t.f=function(e){var t="https://locations.ninjavan.sg/postcode/"+e;return new Promise(function(e){Object(o.r)(t).then(function(t){t.ok&&t.json().then(function(t){if(t.length>0){var r="";t[0].building&&(r+=t[0].building+", "),t[0].building_no&&(r+=t[0].building_no,n=t[0].building_no,/^\d+$/.test(n)?r+=" ":r+=", "),t[0].street&&(r+=t[0].street),e(r)}var n})})})},t.k=function(e){return-1!==_.zipcodes.indexOf(""+e)},t.i=function(e){if(!e)return Promise.resolve(h);if(3!==(e=e.substr(0,3)).length)return Promise.resolve(h);return Object(i.c)().then(function(t){if(t[e]&&t[e].city){var r=t[e].city,n=t[e].district;return r?{city:r,district:n}:h}return h})},t.j=function(e,t){return Object(i.b)().then(function(r){if(!r[e])return"";var n=r[e][t]||r[e];return/^\d*$/.test(n)?n:""})};var n=r(3),i=r(392),o=r(6),a=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var s=function e(t,r,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,o=[];if(r&&r.toLowerCase().includes(t)&&o.push([r]),Array.isArray(n)||0===i){Array.isArray(n)||(n=Object.keys(n));var a=n.filter(function(e){return e.toLowerCase().includes(t)});a&&a.length&&(a=a.map(function(e){return r?[r,e]:[e]}),o=o.concat(a))}else for(var s in n){var u=e(t,s,n[s],i-1);if(u.length){var c=!0,l=!1,p=void 0;try{for(var d,f=u[Symbol.iterator]();!(c=(d=f.next()).done);c=!0){var _=d.value;o.push((r?[r]:[]).concat(_))}}catch(e){l=!0,p=e}finally{try{!c&&f.return&&f.return()}finally{if(l)throw p}}}}return o},u=[];((function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.addressData={};var i=r(391)("./"+t+".json");e.cache.hasOwnProperty(t)?this.promise=new Promise(function(r){n.addressData=e.cache[t],r(null)}):this.promise=new Promise(function(r){i.then(function(i){n.addressData=i,e.cache[t]=n.addressData,r(null)})})}return a(e,[{key:"getCurrentLevelList",value:function(e,t){var r=this;"function"==typeof t&&this.promise.then(function(){t(function(e,t){if(!e)return Object.keys(t);var r=!0,n=!1,i=void 0;try{for(var o,a=e[Symbol.iterator]();!(r=(o=a.next()).done);r=!0){var s=o.value;if(!t[s])return[];t=t[s]}}catch(e){n=!0,i=e}finally{try{!r&&a.return&&a.return()}finally{if(n)throw i}}return Array.isArray(t)?t:Object.keys(t)}(e,r.addressData))})}},{key:"getSelectedLevelsByKeyword",value:function(e,t){"function"==typeof t&&t(s(e.toLowerCase(),null,this.addressData))}}]),e})()).cache={};var c={SG:[],MY:["state","area"],VN:["city","district","ward"],PH:["region","province","city","barangay"],ID:["province","city","district"],TW:["city","district"],TH:["state","city"]},l=["state","city","district","town"],p=(n.e,"SG"===n.e),d="VN"!==n.e,f={state:{placeholder:"label_state"},city:{placeholder:"label_city"},district:{placeholder:"label_district"},area:{placeholder:"label_area"},ward:{placeholder:"label_ward"},barangay:{placeholder:"label_barangay"},region:{placeholder:"label_region"},province:{placeholder:"label_province"}};var _={};"TH"===n.e&&r.e(6).then(r.bind(null,883)).then(function(e){_=e});var h={city:null,district:null}},1538:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"b",function(){return o}),r.d(t,"c",function(){return a});var n=r(3),i={TW:{state:"台北市",city:"中正區"},PH:{state:"Metro Manila",city:"Metro Manila"},VN:{state:"Hà Nội",city:"Huyện Ba Vì"},ID:{state:"DKI JAKARTA",city:"KOTA JAKARTA PUSAT",district:"MENTENG"},TH:{state:"จังหวัดกรุงเทพมหานคร",city:"เขตพระนคร"},MY:{state:"Kuala Lumpur",city:"KL City"}}[n.e],o={TW:2,PH:2,VN:2,ID:3,TH:2,MY:2}[n.e],a=10},1653:function(e,t,r){"use strict";t.h=p,t.e=function(e,t,r){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=arguments[4],i=arguments[5],o=arguments[6],a=arguments[7],c=arguments[8],d=arguments[9],f=Object(s.d)(e,s.b.SELLER_DEFINED_FREE_SHIPPING_PROMOTION)?u({},l[e],{highlightPromotionFees:!0}):null,_=p(e,t,r,a,f);return _.generateDiscountString({promotionRules:c,shopName:n,shopEnabledChannelsData:_.generateShopChannelDataParameters(i),crossBorder:o,orderTotal:d,simpleMode:!1})},t.i=function(e){return e&&e.some(function(e){return e.channel&&e.channel.distance_calculation})},t.c=function(e){if("unsupported_address"===(t=e).warning||"unsupported_seller_address"===t.warning||"channel_unavailable"===t.warning)return"label_unsupported_address";if(e&&"shipping_option_unsupported"===e.warning)return"label_shipping_option_unsupported";var t;return null},t.d=function(e,t,r,n,i,o,a,c,d,f){var _=n.channel.channelid,h=Object(s.d)(e,s.b.SELLER_DEFINED_FREE_SHIPPING_PROMOTION)?u({},l[e],{highlightPromotionFees:!0}):null,g=p(e,t,r,f,h);return g.generateChannelDiscountHint(c,_,g.generateShopChannelDataParameters(d)[_],o,a)},t.b=d,t.g=function(e,t,r,n,i,o){if(!(n=n.filter(function(e){return"unsupported_address"!==e.warning&&"unsupported_seller_address"!==e.warning&&e.channel&&e.channel.channelid})).some(function(e){return e.hasOwnProperty("cost")}))return r("label_unsupported_address");var u=void 0,l=void 0;if(Object(s.d)(e,s.b.SELLER_DEFINED_FREE_SHIPPING_PROMOTION))l=a()(e,Math.max.apply(Math,c(n.map(function(e){return e.cost||0})))),u=a()(e,Math.min.apply(Math,c(n.map(function(e){return e.cost||0}))));else{var p=n.map(function(n){return d(e,t,r,o,i,n).possibleShippingFees});u=a()(e,Math.min.apply(Math,c(p.map(function(e){return Math.min.apply(Math,c(e))})))),l=a()(e,Math.max.apply(Math,c(p.map(function(e){return Math.max.apply(Math,c(e))}))))}return u===l?u:u+" - "+l},t.f=function(e,t,r){if(!e)return"";var n=e.city+", "+e.state;3===t&&(n=(e.district?e.district+",":"")+" "+e.city);"ID"===r&&(n=""+e.city);return n},t.a=function(e){if(2===e.length)return{state:e[0],city:e[1]};if(3===e.length)return{state:e[0],city:e[1],district:e[2]};return{state:"",city:""}};var n=r(1737),i=r.n(n),o=r(92),a=r.n(o),s=(r(384),r(394)),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};function c(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var l={TW:{showDiscountedFee:!0,showFreeShippingForDiscountStringIfFree:!0,showFreeShippingForDiscountStringIfFree__crossBorder:!0,onlyDisplayFreeShippingForDiscountString:!0,onlyDisplayOneFreeShippingWithMinimumMinOrderTotalForDiscountString:!0,showActualShippingFeeInsteadOfPossibleRange:!0,alwaysShowHighestTierForCartDiscountString:!0,removeRulesForDiscountHintProducesHigherShippingFee:!0,alwaysShowMostAttractiveTierForCartDiscountString:!0,isReact:!0},VN:{hideChannelNamesInDiscountString:!0,countrySpecificRulesetString:!0,useSimpleDiscountStringForPrompt:!0,showNextTierOnlyForDiscountHint:!0,useNewDiscountStringWithLocationGroupNameLabel:!0,ignoreBuyerLocationGroupCheckOnDiscountStringGeneration:!0,useLocationNotSupportedChannelDiscountHint:!0,showActualShippingFeeInsteadOfPossibleRange:!0,showFreeShippingForDeltaIfFree:!0,isReact:!0},MY:{showFreeShippingForDeltaIfFree:!0,showFreeShippingForDeltaIfFree__crossBorder:!1,showFreeShippingForDiscountStringIfFree:!0,showFreeShippingForDiscountStringIfFree__crossBorder:!1,showCappedDeltaWithUpTo:!0,hideChannelNamesInDiscountString:!0,hideCartDiscountString:!0,isReact:!0},PH:{showFreeShippingForDeltaIfFree:!0,showFreeShippingForDeltaIfFree__crossBorder:!0,hideSupersededTiersForDiscountString:!0,hideChannelNamesInDiscountString:!0,useCountrySpecificRuleString:!0,hideCapForPercentageWithCapForDiscountString:!0,showNextTierOnlyForDiscountHint:!0,hideCapForPercentageWithCapForDiscountHint:!0,hideCapForPercentageWithCapForCartDiscountString:!0,displayHighestTierIfAllClearedForPrompt:!0,isReact:!0},SG:{hideUnnecessaryDecimalPlacesInAmount:!0,showFreeShippingForDeltaIfFree:!0,showFreeShippingForDeltaIfFree__crossBorder:!1,showFreeShippingForDiscountStringIfFree__crossBorder:!0,doNotShowFreeShippingForDiscountStringIfNoTiersMet__crossBorder:!0,showCappedDeltaWithUpTo:!0,showFreeShippingForDiscountStringIfFree:!0,hideSupersededTiersForDiscountString:!0,useCountrySpecificRuleString:!0,allowDifferentDeltaUnderSameMinimumOrderTotalForDiscountString:!0,hideNextTierIfCurrentTierIsFreeShippingForDiscountHint:!0,hideNextTierIfCurrentTierIsFreeShippingForDiscountHint__crossBorder:!0,showAllTiersRegardlessIfNoTiersMetForDiscountHint__crossBorder:!0,hideCartDiscountString:!0,showAllUnmetTiersForPrompt:!0,isReact:!0},TH:{showFreeShippingInsteadOfDeltaForCapForDiscountStringOnly:!0,hideChannelNamesInDiscountString:!0,useCountrySpecificRuleString:!0,displayHighestTierIfAllClearedForHint:!0,showQualifiedForShippingSubsidyInsteadOfDeltaForCartDiscountStringOnly:!0,showQualifiedForShippingSubsidyInsteadOfDeltaForDiscountPromptOnly:!0,useSimpleDiscountStringForPrompt:!0,isReact:!0},ID:{showFreeShippingForDeltaIfFree:!0,showCappedDeltaWithUpTo:!0,useCountrySpecificRuleString:!0,displayHighestTierIfAllClearedForHint:!0,showDetailedDiscountInfoForCartDiscount:!0,hideDiscountPrompt:!0,onlyDisplayFreeShippingForDiscountString:!0,allowDifferentDeltaUnderSameMinimumOrderTotalForDiscountString:!0,onlyDisplayOneFreeShippingWithMinimumMinOrderTotalForDiscountString:!0,showHighestTierOnlyForDiscountHint:!0,hideAddressNotSupportedChannelForChannelDiscountHint:!0,isReact:!0}};function p(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return o||(o=l[e]),i()().create(e,t,n,r,o)}function d(e,t,r,n,i,o){var a=o.channel.channelid,s=p(e,t,r,n),u=s.generateShopChannelDataParameters([o])[a];return s.generateChannelShippingFeeDisplayData(i,a,u)}},1737:function(e,t,r){(function(e){var r,n,i,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};o=function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=18)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogisticPromotionRuleDiscountRuleFlag={REQUIRE_MIN_ORDER_TOTAL:16,REQUIRE_BUYER_LOCATION:32,HIDE_PROMOTION_RULE_FROM_DISPLAY:256,HIDE_PROMOTION_RULE_FROM_DISCOUNT_STRING_ONLY:512},t.LogisticPromotionRuleDiscountFlag={PERCENTAGE:1,FLAT_RATE:2,CAPPED:4,PERCENTAGE_WITH_CAP:8,ROUND_UP_DISCOUNTED_AMOUNT:65536,ROUND_DOWN_DISCOUNTED_AMOUNT:1<<17},t.LogisticPromotionRuleDiscountFlagComparisonModifier=65535,t.DB_PRICE_INFLATION_FACTOR=1e5,t.FEE_RANGE_SEPARATOR=" - ",t.LIST_SEPARATOR={ID:" / ",TW:"、",en:", ",zhHant:"、"},t.PHRASE_SEPARATOR={ID:" / ",TW:"; ",en:", ",zhHant:"; "},t.SENTENCE_SEPARATOR={ID:", ",TW:"，",en:", ",zhHant:"，"},t.DISCOUNT_DELTA_TYPE={DELTA_PERCENTAGE:1,DELTA_CAPPED:2,DELTA_FLAT_RATE:3,DISCOUNTED_AMOUNT:4,FREE_SHIPPING:5,DELTA_PERCENTAGE_WITH_CAP:6,QUALIFIED_FOR_SHIPPING_SUBSIDY:100},t.DISCOUNT_RULE_VARS_CALLER={DISCOUNT_STRING:2,DISCOUNT_HINT:4,CART_DISCOUNT_STRING:6,DETAILED_CART_DISCOUNT_INFO:8,DISCOUNT_PROMPT:10},t.ICON_HELP_MARKER="<IconHelp>",t.BREAK_LINE_MARKER="\n"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupBy=function(e,t){for(var r={},n=0;n<e.length;n++){var i=e[n],o=t(i);void 0!==o&&(r[o]||(r[o]=[]),r[o].push(i))}return r},t.unsafeTranslate=function(e){return function(t,r){return e(t,Object.assign({},r,{interpolation:{escapeValue:!1}}))}},t.highlight=function(e,t,r){var n=function(e){return(""+e).replace(/[&<>"'\/]/g,function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}[e]})}(t);if(e.isReactNative||e.isReact)return'<View style="font-size: 14px; color: #ff5722;">'+n+"</View>";var i=i||"pl-c-primary";return'<span class="'+i+'">'+n+"</span>"},t.formatCurrencyWrapper=function(e,t,r){return e.hideUnnecessaryDecimalPlacesInAmount&&r%o.DB_PRICE_INFLATION_FACTOR==0?(0,n.formatCurrencyWithPrecision)(t,0,r):(0,i.default)(t,r)};var n=r(10),i=function(e){return e&&e.__esModule?e:{default:e}}(n),o=r(0)},function(e,t,r){"use strict";function n(e,t){return!!e&&e.discount_flag&i.LogisticPromotionRuleDiscountFlag.FLAT_RATE&&0===e.discount_delta}Object.defineProperty(t,"__esModule",{value:!0}),t.applyFilters=function(e,t,r){for(var n=void 0,i=0;i<r.length;i++)n=r[i],e=e.filter(function(e){for(var r=0;r<n.length;r++)if((0,n[r])(e,t))return!0;return!1});return e},t.isChannelSupported=function(e,t){return Object.keys(e.channels).indexOf(""+t.channelid)>=0},t.isShopSupported=function(e,t){return Object.keys(e.channels).filter(function(e){return-1!=Object.keys(t.shopEnabledChannelsData).indexOf(e)}).length>0},t.isBuyerLocationGroupSupported=function(e,t){var r=t.shippingFeeData.buyerLocationGroupIds||[],n=e.extra_data.buyer_location_group_id;return(e.discount_rule_flag&i.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION)<=0||r.indexOf(n)>=0},t.isLocationGroupSupported=function(e,t){var r=t.shopEnabledChannelsData,n=(e.extra_data.buyer_location_group_id,Object.keys(e.channels).filter(function(e){return Object.keys(r).indexOf(e)>=0}));if(n.length<=0)return!1;if((e.discount_rule_flag&i.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION)<=0)return!0;for(var o=0;o<n.length;o++){var a=n[o],s=r[a].buyerLocationGroupIds;if(s&&s.indexOf(e.extra_data.buyer_location_group_id)<0)return!1}return!0},t.isCapPromotion=function(e,t){return!!e&&e.discount_flag&i.LogisticPromotionRuleDiscountFlag.CAPPED},t.isFreeShippingPromotion=n,t.isShopeePromotion=function(e,t){return!!e&&0===e.shopId},t.isSellerPromotion=function(e,t){return!!e&&e.shopId>0},t.isSellerFreeShippingPromotion=function(e,t){return!!e&&e.shopid>0&&n(e)},t.isFreeShippingDiscountRuleVar=function(e,t){return!!e&&e.deltaType===i.DISCOUNT_DELTA_TYPE.FREE_SHIPPING},t.isFlatRateFreeShippingDiscountRuleVar=function(e,t){return!!e&&e.deltaType===i.DISCOUNT_DELTA_TYPE.FREE_SHIPPING&&(e.ruleFlag&i.LogisticPromotionRuleDiscountFlag.FLAT_RATE)>0},t.isCapDiscountRuleVar=function(e,t){return!!e&&(e.ruleFlag&i.LogisticPromotionRuleDiscountFlag.CAPPED)>0},t.isFlatRateDiscountRuleVar=function(e,t){return!!e&&e.ruleFlag===i.LogisticPromotionRuleDiscountFlag.FLAT_RATE};var i=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),o=r(6),a=r(0),s=r(2),u=r(4),c=r(8),l=r(14);t.BaseDisplay=function(){function e(t,r,n,o){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.config=t,this.countryCode=r,this.languageCode=n,this.trans=t.HIGHLIGHT_MBS_FOR_CHANNEL_DISPLAY||t.HIGHLIGHT_DELTA_AMOUNT_FOR_CHANNEL_DISPLAY?(0,i.unsafeTranslate)(o):o}return n(e,[{key:"getDummyFilters",value:function(){return[[function(e,t){return e}]]}},{key:"getDummyPreprocessorFunction",value:function(){return function(e,t){return e}}},{key:"getParams",value:function(){return{preProcessingStopConditions:this.getPreProcessingStopConditions(),rulesPreprocessors:this.getRulesPreprocessors(),postProcessingStopConditions:this.getPostProcessingStopConditions(),hintGenerator:this.getHintGenerator().bind(this)}}},{key:"getPreProcessingStopConditions",value:function(){return[u.hasNoPromotion]}},{key:"getRulesPreprocessors",value:function(){var e=this;return[function(t,r){return(0,s.applyFilters)(t,r,e.getPromotionRulesFilters())},function(t,r){return e.getPromotionRulesFormatter()(e.config,t,r)},function(t,r){return(0,s.applyFilters)(t,r,e.getDiscountRuleVarsFilters())},function(t,r){return t.sort(e.getDiscountRuleVarsSorter())},function(t,r){return e.getDiscountRuleVarsReverser()(t,r)},function(t,r){return e.getDiscountRuleVarsSplitter()(t,r)}]}},{key:"getPostProcessingStopConditions",value:function(){return[u.hasNoDiscountRuleVar]}},{key:"getDiscountRuleVarsSplitter",value:function(){return this.getDummyPreprocessorFunction()}},{key:"getPromotionRulesFormatter",value:function(){return l.formatRuleToDiscountRuleVars}},{key:"getPromotionRulesFilters",value:function(){return[[s.isChannelSupported,s.isShopSupported],[s.isLocationGroupSupported]]}},{key:"getDiscountRuleVarsFilters",value:function(){return[[s.isCapDiscountRuleVar,s.isFreeShippingDiscountRuleVar,s.isFlatRateDiscountRuleVar]]}},{key:"getDiscountRuleVarsSorter",value:function(){return c.sortDiscountRuleVarsByMBSAndPriority}},{key:"getDiscountRuleVarsReverser",value:function(){return function(e,t){return e.reverse()}}},{key:"getHintGenerator",value:function(){return function(){}}},{key:"getCountrySpecificTransifyKey",value:function(e){return this.config.countrySpecificRulesetString?e+"__"+this.countryCode:e}},{key:"applyPreprocessors",value:function(e,t,r){for(var n=e.slice(),i=0;i<r.length;i++)n=(0,r[i])(n,t);return n}},{key:"process",value:function(e,t,r,n,i,o){if((0,u.applyStopConditions)({promotionRules:t},e.preProcessingStopConditions))return"";var s=this.applyPreprocessors(t,{shopEnabledChannelsData:r,channels:n,channelid:i,orderTotal:o},e.rulesPreprocessors);if(s.length<=0)return"";if((0,u.applyStopConditions)({discountRuleVars:s,orderTotal:o},e.postProcessingStopConditions))return"";for(var c=e.hintGenerator({preprocessedPromotions:s,orderTotal:o}),l=[],p=void 0,d=0;d<c.length;d++)if((p=c[d]).rulePhraseData){var f=this.translateHints(p.rulePhraseData);if(f.join(a.PHRASE_SEPARATOR[this.languageCode]).length<=0)return"";p.rulesetData.transifyData.rulePhrases=f,l.push(this.trans(p.rulesetData.transifyKey,p.rulesetData.transifyData))}return l.join(a.BREAK_LINE_MARKER)}},{key:"translateHints",value:function(e){var t=this;return e.map(function(e){var r=e.discountRuleVar,n=e.transifyKey,i=e.transifyData||{};return i.useFreeShippingPhrase&&(r.deltaType=a.DISCOUNT_DELTA_TYPE.FREE_SHIPPING),i.deltaPhrase=(0,o.generateDiscountDeltaPhrase)(t.config,t.countryCode,t.trans,r.deltaType,r.delta),t.trans(n,i)})}}]),e}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyStopConditions=function(e,t){for(var r=0;r<t.length;r++)if((0,t[r])(e))return!0;return!1},t.hasNoPromotion=function(e){return(e.promotionRules||[]).length<=0},t.canApplyHighestMBSDiscountRuleVars=function(e){var t=e.discountRuleVars||[];return t.length<=0||(e.orderTotal||0)>=t[0].minOrderTotal},t.canApplyFSPromotion=function(e){var t=e.discountRuleVars||[];if(t.length<=0)return!1;var r=e.orderTotal||0;return t.filter(function(e){return e.deltaType===n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING}).filter(function(e){return r>=e.minOrderTotal}).length>0},t.hasNoDiscountRuleVar=function(e){return(e.discountRuleVars||[]).length<=0},t.canApplyFlatRateFSPromotion=function(e,t){var r=e.discountRuleVars||[];if(r.length<=0)return!1;var i=e.orderTotal||0,o=r.filter(function(e){return e.deltaType===n.DISCOUNT_DELTA_TYPE.FREE_SHIPPING&&(e.ruleFlag&n.LogisticPromotionRuleDiscountFlag.FLAT_RATE)>0});return t&&(o=o.filter(function(e){return i>=e.minOrderTotal})),o.length>0};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.groupDiscountVarsByMBS=function(e){return(0,n.groupBy)(e,function(e){return e.minOrderTotal||0})},t.sortArrayByValue=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=e.slice().sort(function(e,t){return e-t});return t&&(r=r.reverse()),r},t.getPromotionChannelIds=function(e,t){return e&&t?Object.keys(e.channels).filter(function(e){return-1!=Object.keys(t).indexOf(e)}):[]};var n=r(1);r(0),r(2)},function(e,t,r){"use strict";function n(e,t){var r=t;if(e.discount_flag&o.LogisticPromotionRuleDiscountFlag.PERCENTAGE?r=t*(100-e.discount_delta)/100:e.discount_flag&o.LogisticPromotionRuleDiscountFlag.FLAT_RATE?r=e.discount_delta:e.discount_flag&o.LogisticPromotionRuleDiscountFlag.CAPPED?r=t-Math.min(t,e.discount_delta):e.discount_flag&o.LogisticPromotionRuleDiscountFlag.PERCENTAGE_WITH_CAP&&(r=t-Math.min(t*e.discount_delta/100,e.extra_data.percentage_discount_cap)),e.discount_flag&o.LogisticPromotionRuleDiscountFlag.ROUND_UP_DISCOUNTED_AMOUNT){var n=e.extra_data.discount_rounding_factor,i=r%n;i&&(r+=n-i)}else if(e.discount_flag&o.LogisticPromotionRuleDiscountFlag.ROUND_DOWN_DISCOUNTED_AMOUNT){var a=r%e.extra_data.discount_rounding_factor;a&&(r-=a)}return r}function i(e,t,r){return void 0!==r.estimatedShippingFee?r.estimatedShippingFee:e[t]?e[t].minimum_cost:0}Object.defineProperty(t,"__esModule",{value:!0}),t.getDiscountRuleVarsComparisonKey=function(e,t,r){var n=[];return(e&=o.LogisticPromotionRuleDiscountFlagComparisonModifier)&o.DISCOUNT_DELTA_TYPE.FREE_SHIPPING||e&o.DISCOUNT_DELTA_TYPE.QUALIFIED_FOR_SHIPPING_SUBSIDY?n.push(e,0):n.push(e,t),void 0!==r&&n.push(r),n.toString()},t.isSameDeltaType=function(e,t,r,n){return!((e&o.LogisticPromotionRuleDiscountFlagComparisonModifier)!=(r&o.LogisticPromotionRuleDiscountFlagComparisonModifier)||!(e&o.DISCOUNT_DELTA_TYPE.FREE_SHIPPING||e&o.DISCOUNT_DELTA_TYPE.QUALIFIED_FOR_SHIPPING_SUBSIDY)&&t!==n)},t.calculateDiscountedFee=n,t.getEstimatedShippingFee=i,t.getMostAttractiveRule=function(e,t){var r=void 0;return e.forEach(function(e){(null==r||r.discountedFee>e.discountedFee||r.discountedFee===e.discountedFee&&r.minOrderTotal>e.minOrderTotal)&&(r=e)}),r},t.getDiscountRuleVars=function(e,t,r,a,s){for(var u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=void 0,p=void 0,d=void 0,f=!1,_=[],h=0;h<s.length;h++){var g=s[h],m=a[g];_.push(i(t,g,m))}var y=Math.min.apply(Math,_),S=n(r,y);e.showDiscountedFee?l=0===(p=S)?o.DISCOUNT_DELTA_TYPE.FREE_SHIPPING:o.DISCOUNT_DELTA_TYPE.DISCOUNTED_AMOUNT:e.showFreeShippingInsteadOfDelta?(l=o.DISCOUNT_DELTA_TYPE.FREE_SHIPPING,p=0):e.showFreeShippingInsteadOfDeltaForCap&&r.discount_flag&o.LogisticPromotionRuleDiscountFlag.CAPPED?(l=o.DISCOUNT_DELTA_TYPE.FREE_SHIPPING,p=0):(p=r.discount_delta,c!==o.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING&&c!==o.DISCOUNT_RULE_VARS_CALLER.DETAILED_CART_DISCOUNT_INFO&&(u&&e.showFreeShippingForDeltaIfFree__crossBorder&&(!e.doNotShowFreeShippingForDiscountStringIfNoTiersMet__crossBorder||y!==S)||!u&&e.showFreeShippingForDeltaIfFree)&&0==S||c===o.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_STRING&&e.showFreeShippingInsteadOfDeltaForCapForDiscountStringOnly?l=o.DISCOUNT_DELTA_TYPE.FREE_SHIPPING:c===o.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING&&e.showQualifiedForShippingSubsidyInsteadOfDeltaForCartDiscountStringOnly||c===o.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_PROMPT&&e.showQualifiedForShippingSubsidyInsteadOfDeltaForDiscountPromptOnly?l=o.DISCOUNT_DELTA_TYPE.QUALIFIED_FOR_SHIPPING_SUBSIDY:r.discount_flag&o.LogisticPromotionRuleDiscountFlag.PERCENTAGE?l=o.DISCOUNT_DELTA_TYPE.DELTA_PERCENTAGE:r.discount_flag&o.LogisticPromotionRuleDiscountFlag.CAPPED?l=o.DISCOUNT_DELTA_TYPE.DELTA_CAPPED:r.discount_flag&o.LogisticPromotionRuleDiscountFlag.FLAT_RATE?l=o.DISCOUNT_DELTA_TYPE.DELTA_FLAT_RATE:r.discount_flag&o.LogisticPromotionRuleDiscountFlag.PERCENTAGE_WITH_CAP&&(l=o.DISCOUNT_DELTA_TYPE.PERCENTAGE_WITH_CAP));return r.discount_rule_flag&o.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL&&(d=r.extra_data.min_order_total),r.discount_rule_flag&o.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION&&(f=!0),{deltaType:l,delta:p,minOrderTotal:d,channelids:s,extra:r.extra_data,priority:r.priority,discountedFee:S,requireBuyerLocation:f,shopId:r.shopid,ruleFlag:r.discount_flag}},t.generateDiscountDeltaPhrase=function(e,t,r,n,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,c=void 0,l=e.highlightPromotionFees?(0,a.unsafeTranslate)(r):r,p=e.highlightPromotionFees?function(e,t,r){return(0,a.highlight)(e,(0,a.formatCurrencyWrapper)(e,t,r))}:a.formatCurrencyWrapper;switch(n){case o.DISCOUNT_DELTA_TYPE.DELTA_PERCENTAGE:c=l("msg_promotion__delta__percentage",{delta:e.highlightPromotionFees?(0,a.highlight)(e,i):i});break;case o.DISCOUNT_DELTA_TYPE.DELTA_CAPPED:c=u===o.DISCOUNT_RULE_VARS_CALLER.DETAILED_CART_DISCOUNT_INFO?p(e,t,i):l(e.showCappedDeltaWithUpTo?"msg_promotion__delta__capped__up_to":"msg_promotion__delta__capped",{delta:p(e,t,i)});break;case o.DISCOUNT_DELTA_TYPE.DELTA_FLAT_RATE:c=l("msg_promotion__delta__flat_rate",{delta:p(e,t,i)});break;case o.DISCOUNT_DELTA_TYPE.FREE_SHIPPING:c=l("msg_promotion__delta__free_shipping"),c=e.highlightPromotionFees?(0,a.highlight)(e,c):c;break;case o.DISCOUNT_DELTA_TYPE.DISCOUNTED_AMOUNT:c=l("msg_promotion__delta__discounted_amount",{delta:p(e,t,i)});break;case o.DISCOUNT_DELTA_TYPE.PERCENTAGE_WITH_CAP:c=l(u===o.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_STRING&&e.hideCapForPercentageWithCapForDiscountString||u===o.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_HINT&&e.hideCapForPercentageWithCapForDiscountHint||u===o.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING&&e.hideCapForPercentageWithCapForCartDiscountString?"msg_promotion__delta__percentage":"msg_promotion__delta__percentage_with_cap",{delta:i,cap:p(e,t,s.percentage_discount_cap)});break;case o.DISCOUNT_DELTA_TYPE.QUALIFIED_FOR_SHIPPING_SUBSIDY:c=l("msg_promotion__delta__qualified_for_shipping_subsidy");break;default:c=""}return c},t.filterPromotionRules=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[],a=0;a<e.length;a++){var s=e[a];Object.keys(s.channels).indexOf(""+t)<0||s.discount_rule_flag&o.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION&&r&&r.indexOf(s.extra_data.buyer_location_group_id)<0&&!n||i.push(s)}return i},t.filterPromotionRulesByShopEnabledChannelsData=function(e,t,r){for(var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=[],a=0;a<e.length;a++){var s=e[a];if((void 0===r||r(s))&&!(s.discount_rule_flag&o.LogisticPromotionRuleDiscountRuleFlag.HIDE_PROMOTION_RULE_FROM_DISPLAY)&&(s.affectedChannelIds=Object.keys(s.channels).filter(function(e){return-1!=Object.keys(t).indexOf(e)}),0!==s.affectedChannelIds.length)){if(s.discount_rule_flag&o.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION){for(var u=!1,c=0;c<s.affectedChannelIds.length;c++){var l=s.affectedChannelIds[c],p=t[l].buyerLocationGroupIds;if(p&&p.indexOf(s.extra_data.buyer_location_group_id)<0&&!n){u=!0;break}}if(u)continue}i.push(s)}}return i};var o=r(0),a=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getConfigByCountry=function(e){return n[e]};var n={VN:{showActualShippingFeeInsteadOfPossibleRange:!0,showFreeShippingForDeltaIfFree:!0,ENABLE_MODULAR_PROCESSING:!0,USE_GREEN_TRUCK_STRING_FOR_CART:!0,ALWAYS_USE_FREE_SHIPPING_FOR_DELTA_PHRASE:!0,ADD_ICON_HELP_ON_GREEN_TRUCK_HINT:!0,HIGHLIGHT_MBS_FOR_CHANNEL_DISPLAY:!0,HIGHLIGHT_DELTA_AMOUNT_FOR_CHANNEL_DISPLAY:!0},ID:{},TH:{},PH:{},TW:{},MY:{},SG:{}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortDiscountRuleVarsByMBSAndPriority=function(e,t){return e.minOrderTotal<t.minOrderTotal?-1:e.minOrderTotal>t.minOrderTotal?1:e.priority<t.priority?-1:e.priority>t.priority?1:0}},function(e,t,r){"use strict";(function(e){function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(){function e(e,t,r,o,p){var d=this;return p=Object.assign({},p,(0,l.getConfigByCountry)(e)),this.generateShopChannelDataParameters=function(e){for(var t={},r=0;r<e.length;r++){var n={};e[r].error||(void 0!==e[r].original_cost?(n.estimatedShippingFee=e[r].original_cost,n.discountedShippingFee=e[r].cost):n.estimatedShippingFee=n.discountedShippingFee=e[r].cost,n.locationGroupId=e[r].location_group_id,n.buyerLocationGroupIds=e[r].buyer_location_group_ids,n.warning=e[r].warning,t[e[r].channel.channelid]=n)}return t},this.generateChannelShippingFeeDisplayData=function(t,r,n){if(0===n.estimatedShippingFee)return{estimatedShippingFeeString:(0,s.formatCurrencyWrapper)(p,e,0),possibleShippingFees:[0]};var c=(0,u.filterPromotionRules)(t,r,n.buyerLocationGroupIds).map(function(e){return(0,u.calculateDiscountedFee)(e,n.estimatedShippingFee)});if(p.removeRulesForDiscountHintProducesHigherShippingFee&&(c=c.filter(function(e){return e<=n.discountedShippingFee})),0===c.length)return{estimatedShippingFeeString:(0,s.formatCurrencyWrapper)(p,e,n.estimatedShippingFee),possibleShippingFees:[n.estimatedShippingFee]};var l=Math.min.apply(Math,i(c)),d=(Math.max.apply(Math,i(c)),{}),f=[];return n.discountedShippingFee===n.estimatedShippingFee?(d.estimatedShippingFeeString=[(0,s.formatCurrencyWrapper)(p,e,l),(0,s.formatCurrencyWrapper)(p,e,n.estimatedShippingFee)].join(a.FEE_RANGE_SEPARATOR),f.push(l),f.push(n.discountedShippingFee)):l===n.discountedShippingFee?(d.estimatedShippingFeeString=(0,s.formatCurrencyWrapper)(p,e,n.estimatedShippingFee),d.discountedShippingFeeString=(0,s.formatCurrencyWrapper)(p,e,l),f.push(l)):(d.estimatedShippingFeeString=(0,s.formatCurrencyWrapper)(p,e,n.estimatedShippingFee),d.discountedShippingFeeString=[(0,s.formatCurrencyWrapper)(p,e,l),(0,s.formatCurrencyWrapper)(p,e,n.discountedShippingFee)].join(a.FEE_RANGE_SEPARATOR),f.push(l),f.push(n.discountedShippingFee)),p.showActualShippingFeeInsteadOfPossibleRange&&(d.estimatedShippingFeeString&&(d.estimatedShippingFeeString=0===n.estimatedShippingFee?o("label_free_shipping_cap"):(0,s.formatCurrencyWrapper)(p,e,n.estimatedShippingFee)),d.discountedShippingFeeString&&(d.discountedShippingFeeString=0===n.discountedShippingFee?o("label_free_shipping_cap"):(0,s.formatCurrencyWrapper)(p,e,n.discountedShippingFee))),d.possibleShippingFees=f,d},this.generateDiscountString=function(n,l){n=Object.assign({crossBorder:!1,orderTotal:0,simpleMode:!1,fromCart:!1,fromPrompt:!1},n);var d=Object.assign({},p,l);if(d.ENABLE_MODULAR_PROCESSING)return(0,c.generateProductGreenTruckDiscountString)(d,e,t,o,n.promotionRules,n.shopEnabledChannelsData,r,0,n.orderTotal);if(!n.simpleMode&&(n.crossBorder&&d.showFreeShippingForDiscountStringIfFree__crossBorder||!n.crossBorder&&d.showFreeShippingForDiscountStringIfFree)&&Object.keys(n.shopEnabledChannelsData).map(function(e){return n.shopEnabledChannelsData[e]}).some(function(e){return 0===e.discountedShippingFee}))return o("label_free_shipping_cap");for(var f=[],_=n.fromCart?a.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING:n.fromPrompt?a.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_PROMPT:a.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_STRING,h=(0,u.filterPromotionRulesByShopEnabledChannelsData)(n.promotionRules,n.shopEnabledChannelsData,function(e){return n.fromPrompt||!(e.discount_rule_flag&a.LogisticPromotionRuleDiscountRuleFlag.HIDE_PROMOTION_RULE_FROM_DISCOUNT_STRING_ONLY)},!!p.ignoreBuyerLocationGroupCheckOnDiscountStringGeneration),g=0;g<h.length;g++){var m=h[g];f.push((0,u.getDiscountRuleVars)(p,r,m,n.shopEnabledChannelsData,m.affectedChannelIds,n.crossBorder,_))}d.alwaysShowMostAttractiveTierForDiscountString&&(f=f.length?[(0,u.getMostAttractiveRule)(f,d)]:[]);var y=(0,s.groupBy)(f,function(e){return(e.minOrderTotal||0).toString()}),S=Object.keys(y).map(function(e){return parseInt(e,10)}).filter(function(e){return 0!=e}).sort(function(e,t){return e-t});if(!d.alwaysShowMostAttractiveTierForDiscountString)if(d.hideSupersededTiersForDiscountString){var D=S.findIndex(function(e){return n.orderTotal<e});if(D<0)S=S.slice(-1);else{var R=D-1;R>0&&(S=S.slice(R))}}else d.alwaysShowHighestTierForDiscountString&&(S=S.slice(-1));var T=[];for(g=0;g<S.length;g++){var v;!function(){var c=S[g],l=y[c],f=(0,s.groupBy)(l,function(e){return(0,u.getDiscountRuleVarsComparisonKey)(e.deltaType,e.delta)}),h=Object.keys(f).sort(function(e,t){return Math.min.apply(Math,i(f[e][0].priority))-Math.min.apply(Math,i(f[t][0].priority))});if(!d.allowDifferentDeltaUnderSameMinimumOrderTotalForDiscountString&&h.length>1)return"continue";for(v=0;v<h.length;v++){var m=f[h[v]];if(!d.onlyDisplayFreeShippingForDiscountString||(0===m[0].discountedFee&&(m[0].deltaType=a.DISCOUNT_DELTA_TYPE.FREE_SHIPPING),m[0].deltaType===a.DISCOUNT_DELTA_TYPE.FREE_SHIPPING)){var D=(0,u.generateDiscountDeltaPhrase)(p,e,o,m[0].deltaType,m[0].delta,m[0].extra,_),R=m.map(function(e){return e.channelids.map(function(e){return r[e]?r[e].name:""})}).reduce(function(e,t){return e.concat(t)},[]).join(a.LIST_SEPARATOR[t]),E="";if(n.simpleMode||d.hideChannelNamesInDiscountString){var C=d.useNewDiscountStringWithLocationGroupNameLabel&&m[0].extra.buyer_location_group_id>0?"msg_promotion__rule__order_total__location_group__simple":"msg_promotion__rule__order_total__simple";d.useCountrySpecificRuleString&&(C+="__"+e),E=o(C,{deltaPhrase:D,minOrderTotal:(0,s.formatCurrencyWrapper)(p,e,c),channelNames:R,buyerLocationGroupName:m[0].extra.buyer_location_group_name||""})}else{var O=d.useNewDiscountStringWithLocationGroupNameLabel&&m[0].extra.buyer_location_group_id>0?"msg_promotion__rule__order_total__location_group":"msg_promotion__rule__order_total";d.useCountrySpecificRuleString&&(O+="__"+e),E=o(O,{deltaPhrase:D,minOrderTotal:(0,s.formatCurrencyWrapper)(p,e,c),channelNames:R,shopName:n.shopName,buyerLocationGroupName:m[0].extra.buyer_location_group_name||""})}d.onlyDisplayOneFreeShippingWithMinimumMinOrderTotalForDiscountString&&T.length||T.push(E)}}}()}if(0===T.length)return"";var E,C=T.join(a.PHRASE_SEPARATOR[t]);return E=n.simpleMode?d.countrySpecificRulesetString?"msg_promotion__ruleset__simple__"+e:"msg_promotion__ruleset__simple":d.countrySpecificRulesetString?"msg_promotion__ruleset__"+e:"msg_promotion__ruleset",o(E,{rulePhrases:C,shopName:n.shopName})},this.generateChannelDiscountHint=function(i,l,d,f,_){var h=[],g=d.buyerLocationGroupIds||[];if(p.ENABLE_MODULAR_PROCESSING)return(0,c.generateChannelDiscountHint)(p,e,t,o,i,d,l,r);if(0===d.discountedShippingFee&&!p.displayHighestTierIfAllClearedForHint)return"";if(p.hideAddressNotSupportedChannelForChannelDiscountHint&&d.warning&&("unsupported_address"===d.warning||"channel_unavailable"===d.warning))return"";var m=(0,u.filterPromotionRules)(i,l,d.buyerLocationGroupIds,!!p.ignoreBuyerLocationGroupCheckOnDiscountStringGeneration).slice().reverse().filter(function(e){return!(e.discount_rule_flag&a.LogisticPromotionRuleDiscountRuleFlag.HIDE_PROMOTION_RULE_FROM_DISPLAY)}).filter(function(e){return e.discount_rule_flag&a.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL}).map(function(e){return(0,u.getDiscountRuleVars)(p,r,e,n({},l,d),[l],_,a.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_HINT)}).sort(function(e,t){var r=e.minOrderTotal-t.minOrderTotal;return 0===r?e.discountedFee-t.discountedFee:r});p.removeRulesForDiscountHintProducesHigherShippingFee&&(m=m.filter(function(e){return e.discountedFee<d.discountedShippingFee}));for(var y=m[0],S=p.highlightPromotionFees?(0,s.unsafeTranslate)(o):o,D=0;D<m.length;D++){var R=m[D];if(!(R.discountedFee>=y.discountedFee&&0!==D)&&(y=R,!(f>=R.minOrderTotal)||p.displayHighestTierIfAllClearedForHint&&D==m.length-1||p.useLocationNotSupportedChannelDiscountHint)){var T=(0,u.generateDiscountDeltaPhrase)(p,e,o,R.deltaType,R.delta,R.extra,a.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_HINT),v=void R.extra.buyer_location_group_id;R.requireBuyerLocation&&g.indexOf(R.extra.buyer_location_group_id)<0&&p.useLocationNotSupportedChannelDiscountHint?v="msg_promotion__hint__location_not_supported":(v="msg_promotion__hint__order_total__"+e,v+=_?"__cb":"");var E=(0,s.formatCurrencyWrapper)(p,e,R.minOrderTotal),C=S(v,{deltaPhrase:T,minOrderTotal:p.highlightPromotionFees?(0,s.highlight)(p,E):E});if(p.isReactNative||p.isReact?h.push(C):h.push('<span class="pl-promotion">'+C+"</span>"),(_&&p.hideNextTierIfCurrentTierIsFreeShippingForDiscountHint__crossBorder&&!p.showAllTiersRegardlessIfNoTiersMetForDiscountHint__crossBorder||!_&&p.hideNextTierIfCurrentTierIsFreeShippingForDiscountHint)&&0===R.discountedFee)break}}return h.length>0?p.showNextTierOnlyForDiscountHint?"("+h[0]+")":p.showHighestTierOnlyForDiscountHint?"("+h[h.length-1]+")":"("+h.join(a.LIST_SEPARATOR[t])+")":""},this.generateCartDiscountString=function(n){if(p.hideCartDiscountString)return"";if(p.ENABLE_MODULAR_PROCESSING)return(0,c.generateCartDiscountString)(p,e,t,o,n.promotionRules,n.shopEnabledChannelsData,r,n.orderTotal);if(p.showDetailedDiscountInfoForCartDiscount){if(!n.promotionRules.length)return"";var i=n.promotionRules.filter(function(e){return e.discount_rule_flag&a.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL}).sort(function(e,t){return e.extra_data.min_order_total+e.priority-(t.extra_data.min_order_total+t.priority)});if(i.length<=0)return"";var l=i[0],f=Object.keys(l.channels).filter(function(e){return-1!=Object.keys(n.shopEnabledChannelsData).indexOf(e)}),_=(0,u.getDiscountRuleVars)(p,r,l,n.shopEnabledChannelsData,f,n.crossBorder,a.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING),h=(0,u.generateDiscountDeltaPhrase)(p,e,o,_.deltaType,_.delta,_.extra,a.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING);return o("msg_promotion__cart__order_total__"+e,{deltaPhrase:h,minOrderTotal:(0,s.formatCurrencyWrapper)(p,e,_.minOrderTotal)})}return n.fromCart=!0,p.alwaysShowMostAttractiveTierForCartDiscountString?d.generateDiscountString(n,{alwaysShowMostAttractiveTierForDiscountString:!0,onlyDisplayFreeShippingForDiscountString:!1}):p.alwaysShowHighestTierForCartDiscountString?d.generateDiscountString(n,{alwaysShowHighestTierForDiscountString:!0,onlyDisplayFreeShippingForDiscountString:!1}):d.generateDiscountString(n,{alwaysShowHighestTierForDiscountString:!1})},this.generateDetailedCartDiscountInfo=function(t){for(var n=(0,u.filterPromotionRulesByShopEnabledChannelsData)(t.promotionRules,t.shopEnabledChannelsData,void 0,!!p.ignoreBuyerLocationGroupCheckOnDiscountStringGeneration),c=[],l=0;l<n.length;l++){var d=n[l];c.push((0,u.getDiscountRuleVars)(p,r,d,t.shopEnabledChannelsData,d.affectedChannelIds,t.crossBorder,a.DISCOUNT_RULE_VARS_CALLER.CART_DISCOUNT_STRING))}var f=(0,s.groupBy)(c,function(e){return(e.minOrderTotal||0).toString()}),_=Object.keys(f).map(function(e){return parseInt(e,10)}).filter(function(e){return 0!=e}).sort(function(e,t){return e-t}),h=[];for(l=0;l<_.length;l++){var g;!function(){var t=_[l],n=f[t],c=(0,s.groupBy)(n,function(e){return(0,u.getDiscountRuleVarsComparisonKey)(e.deltaType,e.delta)}),d=Object.keys(c).sort(function(e,t){return Math.min.apply(Math,i(c[e][0].priority))-Math.min.apply(Math,i(c[t][0].priority))});for(g=0;g<d.length;g++){var m=c[d[g]];h.push({minOrderTotal:(0,s.formatCurrencyWrapper)(p,e,t),deltaPhrase:(0,u.generateDiscountDeltaPhrase)(p,e,o,m[0].deltaType,m[0].delta,m[0].extra,a.DISCOUNT_RULE_VARS_CALLER.DETAILED_CART_DISCOUNT_INFO),channelNames:m.map(function(e){return e.channelids.map(function(e){return r[e].name})}).reduce(function(e,t){return e.concat(t)},[])})}}()}return{shopName:t.shopName,ruleVars:h}},this.generateDiscountPrompt=function(i,l,f,_,h,g){if(p.hideDiscountPrompt)return"";if(p.ENABLE_MODULAR_PROCESSING){var m=n({},f,_);return(0,c.generateDiscountPrompt)(p,e,t,o,i,m,r,f,h)}if(!p.displayHighestTierIfAllClearedForPrompt&&0===_.discountedShippingFee)return"";if(p.useDiscountStringForPrompt||p.useSimpleDiscountStringForPrompt){var y={};return y[f]=_,d.generateDiscountString({promotionRules:i,shopName:l,shopEnabledChannelsData:y,crossBorder:g,orderTotal:h,simpleMode:p.useSimpleDiscountStringForPrompt,fromPrompt:!0})}for(var S=[],D=(0,u.filterPromotionRules)(i,f,_.buyerLocationGroupIds).slice().reverse(),R=0;R<D.length;R++){var T=D[R];if(!(T.discount_rule_flag&a.LogisticPromotionRuleDiscountRuleFlag.HIDE_PROMOTION_RULE_FROM_DISPLAY)&&T.discount_rule_flag&a.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL){if(T.discount_rule_flag&a.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_BUYER_LOCATION){var v=_.buyerLocationGroupIds;if(v&&v.indexOf(T.extra_data.buyer_location_group_id)<0)continue}var E=(0,u.getDiscountRuleVars)(p,r,T,n({},f,_),[f],g,a.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_PROMPT);if(!(h>=E.minOrderTotal&&(!p.displayHighestTierIfAllClearedForPrompt||R<D.length-1))){var C=(0,u.generateDiscountDeltaPhrase)(p,e,o,E.deltaType,E.delta,E.extra,a.DISCOUNT_RULE_VARS_CALLER.DISCOUNT_PROMPT),O=E.channelids.map(function(e){return r[e]?r[e].name:""}).join(a.LIST_SEPARATOR[t]),P=p.useNewDiscountStringWithLocationGroupNameLabel&&E.extra.buyer_location_group_id>0?"msg_promotion__prompt__order_total__location_group__":"msg_promotion__prompt__order_total__";if(P+=e,P+=g?"__cb":"",S.push(o(P,{deltaPhrase:C,minOrderTotal:(0,s.formatCurrencyWrapper)(p,e,E.minOrderTotal),channelNames:O,shopName:l,buyerLocationGroupName:E.extra.buyer_location_group_name||""})),!p.showAllUnmetTiersForPrompt)break}}}return S.length?S.join(a.LIST_SEPARATOR[t]):""},this.calculateShowFreeShippingIcon=function(e,t,r,n){return d.shouldShowFreeShippingIconBesideCartText(e)},this.shouldShowFreeShippingIconBesideCartText=function(t){if("VN"===e){for(var r=0;r<t.length;r++)if(t[r].discount_flag&a.LogisticPromotionRuleDiscountFlag.CAPPED)return!0;return!1}return!0},this.shouldShowFreeShippingIconBesidePrompt=function(t,r){if("VN"===e){for(var n=0;n<t.length;n++){var i=t[n];if(i.discount_flag&a.LogisticPromotionRuleDiscountFlag.CAPPED){if(!(i.discount_rule_flag&a.LogisticPromotionRuleDiscountRuleFlag.REQUIRE_MIN_ORDER_TOTAL))return!0;if(r>=i.extra_data.min_order_total)return!0}}return!1}return!0},this}var t={create:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];return new(Function.prototype.bind.apply(e,[null].concat(r)))}};return t}Object.defineProperty(t,"__esModule",{value:!0});var a=r(0),s=r(1),u=r(6),c=r(15),l=r(7);t.default=o,e&&e.exports&&(o.default=o,e.exports=o)}).call(t,r(17)(e))},function(e,t,r){e.exports=function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.CONVERT_RATIO=1e5,t.MAX_PRECISION=20,t.COUNTRY_TO_CURRENCY={SG:"SGD",ID:"IDR",MY:"MYR",PH:"PHP",TW:"TWD",TH:"THB",VN:"VND",IR:"IRR",MM:"MMK",HK:"HKD"},t.CURRENCY={SGD:{symbol:"$",precision:2,separator:",",decimalPoint:".",convertRate:1},IDR:{symbol:"Rp",precision:0,separator:".",decimalPoint:",",convertRate:1},MYR:{symbol:"RM",precision:2,separator:",",decimalPoint:".",convertRate:1},PHP:{symbol:"₱",precision:2,separator:",",decimalPoint:".",convertRate:1},TWD:{symbol:"$",precision:0,separator:",",decimalPoint:".",convertRate:1},THB:{symbol:"฿",precision:0,separator:",",decimalPoint:".",convertRate:1},VND:{symbol:"₫",precision:0,separator:".",decimalPoint:",",convertRate:1},IRR:{symbol:"تومان",precision:0,separator:",",decimalPoint:".",convertRate:.1},MMK:{symbol:"Ks",precision:0,separator:",",decimalPoint:".",convertRate:1},HKD:{symbol:"$",precision:2,separator:",",decimalPoint:".",convertRate:1}});t.CURRENCY_SYMBOL=function(){var e={};return Object.keys(n).forEach(function(t){e[t]=n[t].symbol}),e}(),t.NOTCHES=[{notch:1e9,unit:"b"},{notch:1e6,unit:"m"},{notch:1e3,unit:"k"}],t.LOCALIZED_NOTCH_UNITS={default:{K:"k",M:"m",B:"b"},id:{K:"rb",M:"juta"},ph:{K:"k",M:"mil"},th:{K:"พัน",M:"ล้าน"},vn:{K:"k",M:"tr"}}},function(e,t,r){"use strict";function n(e,t){return l.CURRENCY[t||l.COUNTRY_TO_CURRENCY[e]]}function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=parseFloat(e);return isFinite(r)?(t&&(r/=l.CONVERT_RATIO),r):e}function o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";if(e=i(e),!isFinite(e))return e;var o=e.toString(),a=o.indexOf(".");if(null==t?t=a>=0?o.length-a+1:0:o=e.toFixed(t),n){for(var s=0===t?o.length:o.indexOf("."),u=o.search(/^-\+/)+1,c=o.slice(0,u),l=[],p=s;p>u;p-=3)l.push(o.slice(Math.max(0,p-3),p));l.reverse();var d=c+l.join(n);return 0===t?d:d+r+o.substr(s+1)}return o.replace(/\./,r)}function a(e,t){var r=n(t);return o(e,void 0,r.decimalPoint,r.separator)}function s(e,t,r,a){if(r<0)throw new Error("price number should not be negative");var s=n(e,a),u=i(r,!0)*s.convertRate;return t=t>=0&&t<=l.MAX_PRECISION?t:s.precision,s.symbol+o(u,t,s.decimalPoint,s.separator)}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l.NOTCHES,o=i(e);if(!isFinite(o)||Math.abs(o)<r)return[parseFloat(o.toFixed(t)),""];t=(t=parseInt(t,10))>=0?t>l.MAX_PRECISION?l.MAX_PRECISION:t:1;for(var a=0;a<n.length;a++){var s=n[a],u=s.notch,c=s.unit,p=parseFloat((o/u).toFixed(t));if(Math.abs(p)>=1)return[p,c]}return[o,""]}function c(e,t,r,n,i){var o=l.LOCALIZED_NOTCH_UNITS.default,s=l.LOCALIZED_NOTCH_UNITS[e&&e.toLowerCase()||"default"]||o,c=function(t,r){return r=r&&r.toUpperCase(),[a(t,e&&e.toUpperCase()||"SG"),s[r]||o[r]||""]};return void 0!==t?c.apply(void 0,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(u(t,r,n,i))):c}Object.defineProperty(t,"__esModule",{value:!0});var l=r(0);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})}),t.getCurrencyConfig=n,t.parseNumber=i,t.formatNum=o,t.formatNumber=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:".";return o(i(e,!n),r,a,t)},t.localizeNumber=a,t.default=function(e,t,r){return s(e,void 0,t,r)},t.formatCurrencyWithPrecision=s,t.getCurrencySymbolByCountryCode=function(e){var t=n(e);return t&&t.symbol},t.getCurrencySymbolByCurrencyID=function(e){var t=n(void 0,e);return t&&t.symbol},t.compactNumber=u,t.localizeCompactNumber=c,t.compactCurrencyFromServer=function(e,t,r,o,a){if(t<0)throw new Error("price number should not be negative");var s=n(e),u=i(t,!0)*s.convertRate;return s.symbol+c(e,u,r,o,a).join("")}}])},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CartDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),o=r(3),s=r(2),u=r(8),c=r(4);r(5),r(0),t.CartDisplay=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.BaseDisplay),n(t,[{key:"getHintGenerator",value:function(){return this.processCartDiscountString}},{key:"processCartDiscountString",value:function(e){var t=e.preprocessedPromotions,r=(0,c.canApplyFlatRateFSPromotion)({discountRuleVars:t,orderTotal:e.orderTotal})?this.getFlatRateZeroDiscountRuleVar(t):this.getCappedDiscountRuleVar(t);return r?[{rulesetData:this.getRulesetData(r),rulePhraseData:this.getRulePhraseData(r)}]:[]}},{key:"getFlatRateZeroDiscountRuleVar",value:function(e){var t=e.filter(s.isFlatRateFreeShippingDiscountRuleVar);return(t=t.sort(u.sortDiscountRuleVarsByMBSAndPriority)).length>0?t[0]:null}},{key:"getCappedDiscountRuleVar",value:function(e){var t=e.filter(s.isCapDiscountRuleVar);return(t=t.sort(this.sortCapDiscountRuleVarsByDeltaAndMBS)).length>0?t[0]:null}},{key:"sortCapDiscountRuleVarsByDeltaAndMBS",value:function(e,t){return e.delta>t.delta?-1:e.delta<t.delta?1:(0,u.sortDiscountRuleVarsByMBSAndPriority)(e,t)}},{key:"getRulesetData",value:function(e){var t={delta:(0,i.formatCurrencyWrapper)(this.config,this.countryCode,e.delta)},r=(0,s.isFlatRateFreeShippingDiscountRuleVar)(e)?"msg_promotion__ruleset__simple":"msg_promotion__ruleset__capped__simple";return{transifyKey:r=this.getCountrySpecificTransifyKey(r),transifyData:t}}},{key:"getRulePhraseData",value:function(e){var t={minOrderTotal:(0,i.formatCurrencyWrapper)(this.config,this.countryCode,e.minOrderTotal),useFreeShippingPhrase:!0};return[{discountRuleVar:e,transifyKey:this.getCountrySpecificTransifyKey("msg_promotion__rule__order_total__simple"),transifyData:t}]}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ChannelDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(0),o=(r(6),r(1)),s=r(3),u=r(2),c=r(5);t.ChannelDisplay=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.BaseDisplay),n(t,[{key:"getHintGenerator",value:function(){return this.processChannelHint}},{key:"processChannelHint",value:function(e){for(var t=e.preprocessedPromotions,r={},n=(0,c.groupDiscountVarsByMBS)(t),i=(0,c.sortArrayByValue)(Object.keys(n)).map(function(e){return parseInt(e)}),o=void 0,a=0;a<i.length;a++){o=i[a];var s=this.sortDiscountRuleVarsInMBS(n[o]);r[o]=s[0]}var u=this.findFirstFlatRateZeroMBS(r),l=i.filter(function(e){return e<=u});return this.getRuleHints(l,r)}},{key:"sortDiscountRuleVarsInMBS",value:function(e){return e.sort(function(e,t){if(e.discountedFee<t.discountedFee)return-1;if(e.discountedFee>t.discountedFee)return 1;var r=e.ruleFlag&i.LogisticPromotionRuleDiscountFlag.FLAT_RATE,n=t.ruleFlag&i.LogisticPromotionRuleDiscountFlag.FLAT_RATE;if(r&&!n)return-1;if(!r&&n)return 1;if(r&&n){if(e.delta>t.delta)return 1;if(e.delta<t.delta)return-1}else{if(e.delta<t.delta)return 1;if(e.delta>t.delta)return-1}return e.priority>t.priority?1:e.priority<t.priority?-1:0})}},{key:"findFirstFlatRateZeroMBS",value:function(e){for(var t=(0,c.sortArrayByValue)(Object.keys(e)).map(function(e){return parseInt(e)}),r=void 0,n=void 0,o=void 0,a=void 0,s=0;s<t.length;s++)if(n=((r=e[a=t[s]]).ruleFlag&i.LogisticPromotionRuleDiscountFlag.FLAT_RATE)>0,o=r.deltaType==i.DISCOUNT_DELTA_TYPE.FREE_SHIPPING,n&&o)return a;return a}},{key:"getRuleHints",value:function(e,t){var r=this;return e.map(function(e){var n=t[e];return{rulesetData:r.getRulesetData(n),rulePhraseData:r.getRulePhraseData(n)}})}},{key:"getRulesetData",value:function(e,t){var r=(0,o.formatCurrencyWrapper)(this.config,this.countryCode,e.delta),n={delta:this.config.HIGHLIGHT_DELTA_AMOUNT_FOR_CHANNEL_DISPLAY?(0,o.highlight)(this.config,r):r},i=(0,u.isFlatRateFreeShippingDiscountRuleVar)(e)?"msg_promotion__ruleset__simple":"msg_promotion__ruleset__capped__simple";return{transifyKey:i=this.getCountrySpecificTransifyKey(i),transifyData:n}}},{key:"getRulePhraseData",value:function(e){var t=(0,o.formatCurrencyWrapper)(this.config,this.countryCode,e.minOrderTotal),r={minOrderTotal:this.config.HIGHLIGHT_MBS_FOR_CHANNEL_DISPLAY?(0,o.highlight)(this.config,t):t,useFreeShippingPhrase:!0};return[{discountRuleVar:e,transifyKey:this.getCountrySpecificTransifyKey("msg_promotion__rule__order_total__simple"),transifyData:r}]}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(1),o=r(3),s=r(2),u=r(4),c=r(5);t.CheckoutDisplay=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.BaseDisplay),n(t,[{key:"getPostProcessingStopConditions",value:function(){return function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getPostProcessingStopConditions",this).call(this).concat([u.canApplyHighestMBSDiscountRuleVars,u.canApplyFSPromotion])}},{key:"getHintGenerator",value:function(){return this.processCheckoutDiscountString}},{key:"processCheckoutDiscountString",value:function(e){var t=e.preprocessedPromotions,r=e.orderTotal,n=(0,c.groupDiscountVarsByMBS)(t),i=(0,c.sortArrayByValue)(Object.keys(n)).map(function(e){return parseInt(e)}).filter(function(e){return e>r});if(i.length<=0)return[];var o=i[0],a=this.sortDiscountRuleVarsInMBS(n[o])[0];return[{rulesetData:this.getRulesetData(a,r),rulePhraseData:this.getRulePhraseData(a)}]}},{key:"sortDiscountRuleVarsInMBS",value:function(e){return e.sort(function(e,t){return e.discountedFee<t.discountedFee?-1:e.discountedFee>t.discountedFee?1:e.priority<t.priority?-1:e.priority>t.priority?1:0})}},{key:"getRulesetData",value:function(e,t){var r={delta:(0,i.formatCurrencyWrapper)(this.config,this.countryCode,e.delta)},n=(0,s.isCapDiscountRuleVar)(e)?"msg_promotion__ruleset__capped__simple":"msg_promotion__ruleset__simple";return{transifyKey:n=this.getCountrySpecificTransifyKey(n),transifyData:r}}},{key:"getRulePhraseData",value:function(e){var t={minOrderTotal:(0,i.formatCurrencyWrapper)(this.config,this.countryCode,e.minOrderTotal),useFreeShippingPhrase:!0};return[{discountRuleVar:e,transifyKey:this.getCountrySpecificTransifyKey("msg_promotion__rule__order_total__simple"),transifyData:t}]}}]),t}()},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatRuleToDiscountRuleVars=function(e,t,r){return t.map(function(t){var o=(0,i.getPromotionChannelIds)(t,r.shopEnabledChannelsData),a=(0,n.getDiscountRuleVars)(e,r.channels,t,r.shopEnabledChannelsData,o);return a.minOrderTotal=a.minOrderTotal||0,a})};var n=r(6),i=r(5)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCartDiscountString=function(e,t,r,n,i,o,s,u,c){var l=new a.CartDisplay(e,t,r,n),p=l.getParams();return l.process(p,i,o,s,u,c)},t.generateChannelDiscountHint=function(e,t,r,i,o,a,s,u){var c=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},s,a),l=new n.ChannelDisplay(e,t,r,i),p=l.getParams();return l.process(p,o,c,u,s,0)},t.generateDiscountPrompt=function(e,t,r,n,i,a,s,u,c){var l=new o.CheckoutDisplay(e,t,r,n),p=l.getParams();return l.process(p,i,a,s,u,c)},t.generateProductGreenTruckDiscountString=function(e,t,r,n,o,a,s,u,c){var l=new i.ProductDisplay(e,t,r,n),p=l.getParams();return l.process(p,o,a,s,u,c)};var n=r(12),i=r(16),o=r(13),a=r(11);r(7)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductDisplay=void 0;var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),i=r(3),o=r(4),s=r(0);r(2),t.ProductDisplay=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":a(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.BaseDisplay),n(t,[{key:"getHintGenerator",value:function(){return this.processGreenTruckDiscountDisplay}},{key:"processGreenTruckDiscountDisplay",value:function(e){var t=e.preprocessedPromotions,r=(0,o.canApplyFSPromotion)({discountRuleVars:t,orderTotal:e.orderTotal});return[{rulesetData:this.getRulesetData(r),rulePhraseData:this.getRulePhraseData()}]}},{key:"getRulesetData",value:function(e){var t=e?"msg_promotion__ruleset__simple":"msg_promotion__ruleset__min_spend__icon__simple",r=e?{}:{icon:s.ICON_HELP_MARKER};return{transifyKey:this.getCountrySpecificTransifyKey(t),transifyData:r}}},{key:"getRulePhraseData",value:function(){return[{discountRuleVar:{},transifyKey:"msg_promotion__rule__simple",transifyData:{useFreeShippingPhrase:!0}}]}}]),t}()},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){e.exports=r(9)}])},"object"==a(t)&&"object"==a(e)?e.exports=o():(n=[],void 0===(i="function"==typeof(r=o)?r.apply(t,n):r)||(e.exports=i))}).call(t,r(133)(e))},2019:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34),i=r.n(n),o=r(0),a=r.n(o),s=r(94),u=r.n(s),c=r(2020),l=r(332),p=r(1653),d=r(2024),f=r(930),_=r(2027),h=r(2028),g=r(1106),m=r(1160),y=r(947),S=r(1158),D=r(1538),R=r(2029),T=r(326),v=r(24),E=r(2030),C=r.n(E),O=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var P=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),n=r.props.accountStore.get("default_address");return r.state={addressPickerOpened:!1,selectedShippingAddress:n?n.toJS():D.a},r.onReceiveSelectedAddress=r.onReceiveSelectedAddress.bind(r),r.toggleAddressPicker=r.toggleAddressPicker.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o["Component"]),O(t,[{key:"render",value:function(){var e=this,t=this.props,r=t.productInfo,n=t.productShipping,o=t.logisticsChannels,s=r?r.get("price"):0,u=r?r.get("cb_option"):0,l=r?r.get("shipping_icon_type"):0,T=r&&r.get("is_pre_order");n=n?n.toJS():null,o=o?o.toJS():null;var E=this.isFeeDistanceBased(),O=n&&n.show_free_shipping&&o&&Object(p.e)("SG","SG",v.d,n.logistic_discount_info,n.shopname,n.logistics,u,o,n.promotion_rules,s),P=O?O.replace("<IconHelp>","").replace(/&amp;lt;.+?&amp;gt;/g,""):null;return a.a.createElement("div",{className:C.a.section},T&&a.a.createElement("div",{className:i()("shopee-product-info-body__row",C.a.preorder)},a.a.createElement(h.a,null),a.a.createElement("div",null,Object(v.d)("label_preorder_ship_in_n_days",{n:r.get("estimated_days")}))),!!O&&a.a.createElement("div",{className:i()("shopee-product-info-body__row",C.a.freeShipping)},a.a.createElement(g.a,null),a.a.createElement("span",{className:C.a.freeShippingText,dangerouslySetInnerHTML:{__html:P}})),a.a.createElement("div",{className:C.a.shippingBlock},l===R.a.OVERSEAS?a.a.createElement(_.a,null):a.a.createElement(m.a,null),a.a.createElement("div",{className:C.a.shippingBlockContent},l===R.a.OVERSEAS||E?a.a.createElement("div",{className:(C.a.shippingBlockRow,C.a.fromTo)},a.a.createElement("div",{className:C.a.shippingBlockLabel},""+Object(v.d)("label_shipping")),a.a.createElement("div",{className:C.a.shippingBlockDetail},l===R.a.OVERSEAS&&a.a.createElement("div",{className:C.a.shipFrom},a.a.createElement("span",{className:C.a.shipFromLabel},Object(v.d)("label_from")+":")," "+Object(v.d)("label_overseas")),E?a.a.createElement("div",{className:C.a.shipToPart},a.a.createElement("span",{className:C.a.shipToLabel},Object(v.d)("label_to")+":"),a.a.createElement("div",{className:C.a.shipToSelectorWrapper},a.a.createElement("div",{className:C.a.shipTo,ref:function(t){e.dropdownTab=t},onClick:this.toggleAddressPicker},a.a.createElement("span",{className:C.a.shipToText},Object(p.f)(this.state.selectedShippingAddress,D.b)),this.state.addressPickerOpened?a.a.createElement(S.a,null):a.a.createElement(y.a,null)),this.state.addressPickerOpened?a.a.createElement(d.a,{ref:function(t){e.dropdownWindow=t},maxLevel:D.b,onMaxLevelHit:this.onReceiveSelectedAddress}):null)):null)):null,n&&n.logistics&&n.logistics.length>0?a.a.createElement("div",{className:C.a.shippingBlockRow},a.a.createElement("div",{className:C.a.shippingBlockLabel},Object(v.d)("label_shipping_fee")+": "),a.a.createElement("div",null,a.a.createElement(f.a,{drawerButton:a.a.createElement("div",{className:i()(C.a.shippingCost,"v-center")},Object(p.g)("SG","SG",v.d,n.logistics,n.promotion_rules,o),a.a.createElement(y.a,null))},a.a.createElement("div",{className:i()(C.a.shippingOptionContainer,"card")},n.logistics.filter(function(e){return!e.error}).map(function(e){return a.a.createElement(c.a,{key:e.channel.name,logistic:e,isCrossBorder:u,productInfo:r,productShipping:n,logisticsChannels:o})}))))):a.a.createElement("div",{className:C.a.shippingBlockRow},a.a.createElement("div",{className:C.a.shippingBlockLabel},Object(v.d)("label_shipping_fee_included"))))))}},{key:"componentDidMount",value:function(){this.isFeeDistanceBased()&&this.loadShippingFeeByAddress(this.state.selectedShippingAddress),this.props.orderBlock&&Object(T.c)(this.props.orderBlock,"div.shopee-product-info-body__info-label"),document.querySelector("body").addEventListener("click",this.closeAddressPicker.bind(this))}},{key:"componentWillUnmount",value:function(){document.querySelector("body").removeEventListener("click",this.closeAddressPicker.bind(this))}},{key:"componentDidUpdate",value:function(){this.props.orderBlock&&Object(T.c)(this.props.orderBlock,"div.shopee-product-info-body__info-label")}},{key:"loadShippingFeeByAddress",value:function(e){var t=this.props,r=t.productInfo.get("itemid"),n=t.productInfo.get("shopid");t.loadProductShippingByAddress(e,n,r)}},{key:"isFeeDistanceBased",value:function(){var e=this.props.productShipping?this.props.productShipping.toJS():null;return e&&Object(p.i)(e.logistics)}},{key:"toggleAddressPicker",value:function(){this.setState({addressPickerOpened:!this.state.addressPickerOpened})}},{key:"closeAddressPicker",value:function(e){var t=u.a.findDOMNode(this.dropdownWindow),r=u.a.findDOMNode(this.dropdownTab),n=e.toElement||e.relatedTarget||e.target;t&&!t.contains(n)&&!r.contains(n)&&this.state.addressPickerOpened&&this.setState({addressPickerOpened:!1})}},{key:"onReceiveSelectedAddress",value:function(e){var t=Object(p.a)(e);this.setState({addressPickerOpened:!1,selectedShippingAddress:t}),this.loadShippingFeeByAddress(t,this.props)}}]),t}();t.default=Object(l.b)(P)},2020:function(e,t,r){"use strict";t.a=function(e){var t=e.logistic,r=e.productInfo,n=e.productShipping,u=e.logisticsChannels,l=e.isCrossBorder;if(t.error)return null;var d=Object(o.b)("SG","SG",a.d,u,n.promotion_rules,t),h=r?r.get("price"):0,g=Object(o.d)("SG","SG",a.d,t,n.logistic_discount_info,h,!!l,n.promotion_rules,n.logistics,u),m=Object(o.c)(t),y=t&&t.delivery_info?Object(s.a)(t.delivery_info,a.d):null;if(_)return i.a.createElement("div",{className:p.a.section},i.a.createElement("div",{className:p.a.channelNameAndCost},i.a.createElement("div",{className:p.a.channelName},t.channel.name),i.a.createElement("div",{className:p.a.channelCost},m?Object(a.d)(m):[!!d&&!!d.discountedShippingFeeString&&i.a.createElement("div",{className:p.a.originalChannelCost,key:0},d.estimatedShippingFeeString),!!d&&i.a.createElement("div",{className:p.a.currentChannelCost,key:1},d.discountedShippingFeeString||d.estimatedShippingFeeString)])),y&&i.a.createElement("div",{className:p.a.deliveryTime},y),g&&i.a.createElement("div",{className:p.a.promotionText,dangerouslySetInnerHTML:{__html:Object(c.a)(g).replace(/View/g,"span").replace(/font-size:.+?;/g,"")}}));return i.a.createElement("div",{className:f.a.section},i.a.createElement("div",{className:f.a.channelName},t.channel.name+": "),m?i.a.createElement("div",{className:f.a.currentChannelCost},Object(a.d)(m)):[!!d&&!!d.discountedShippingFeeString&&i.a.createElement("div",{className:f.a.originalChannelCost,key:0},d.estimatedShippingFeeString),!!d&&i.a.createElement("div",{className:f.a.currentChannelCost,key:1},d.discountedShippingFeeString||d.estimatedShippingFeeString)],g&&i.a.createElement("div",{className:f.a.promotionText}," ",g),!!y&&i.a.createElement("div",{className:f.a.deliveryTime},"[",y,"]"))};var n=r(0),i=r.n(n),o=r(1653),a=r(24),s=r(384),u=r(48),c=r(2021),l=r(2022),p=r.n(l),d=r(2023),f=r.n(d),_=Object(u.k)(u.d.NEW_SHIPPING_FEE_DRAWER)},2021:function(e,t,r){"use strict";t.a=function(e){return e.replace(/^\((.+)\)$/,"$1")}},2022:function(e,t){e.exports={section:"DBZ850",channelNameAndCost:"_3Ww4kj",channelName:"_1-FaQg",channelCost:"_3vmp1t",originalChannelCost:"_2dJOHT",currentChannelCost:"vVSS87",deliveryTime:"_219Xfj",promotionText:"_1FtLoT"}},2023:function(e,t){e.exports={section:"_22KDqS",channelName:"_3vY2kS",originalChannelCost:"_2gfZrW",currentChannelCost:"_3uGiVj",deliveryTime:"A0XZdk",promotionText:"_1UYOGn"}},2024:function(e,t,r){"use strict";var n=r(0),i=r.n(n),o=r(29),a=(r.n(o),r(56)),s=r(2025),u=r(2026),c=r(10),l=r(11),p=r(1486),d=r(326),f=r(24),_=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var h=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={searchText:"",queries:[]},r.onBackLevelClicked=r.onBackLevelClicked.bind(r),r.onLevelItemClicked=r.onLevelItemClicked.bind(r),r.onSearchResultClicked=r.onSearchResultClicked.bind(r),r.onSearchTextChange=r.onSearchTextChange.bind(r),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,n["Component"]),_(t,[{key:"componentWillMount",value:function(){this.props.loadStaticAddressList()}},{key:"render",value:function(){var e=this.props,t=e.staticAddress,r=e.maxLevel,n=this.state;return i.a.createElement("div",{className:"shopee-address-picker"},i.a.createElement("div",{className:"shopee-address-picker__search-bar"},i.a.createElement("input",{onChange:this.onSearchTextChange,placeholder:Object(f.d)("label_search"),value:n.searchText})),n.searchText?i.a.createElement(u.a,{searchResult:Object(p.h)(n.searchText,t,r),onSearchResultClick:this.onSearchResultClicked}):i.a.createElement(s.a,{queries:n.queries,results:Object(p.g)(n.queries,t),onBackLevelClick:this.onBackLevelClicked,onLevelItemClick:this.onLevelItemClicked}))}},{key:"onSearchTextChange",value:function(e){this.setState({searchText:e.target.value})}},{key:"onLevelItemClicked",value:function(e){var t=this.props,r=this.state.queries;r.push(e.target.innerHTML),r.length>=t.maxLevel&&"function"==typeof t.onMaxLevelHit?(d.d.restore(),t.onMaxLevelHit(r)):this.setState({queries:r})}},{key:"onBackLevelClicked",value:function(){this.setState({queries:this.state.queries.slice(0,-1)})}},{key:"onSearchResultClicked",value:function(e){var t=this.props;this.setState({searchText:"",queries:e}),e.length>=t.maxLevel&&"function"==typeof t.onMaxLevelHit&&t.onMaxLevelHit(e)}}]),t}();h.defaultProps={maxLevel:2,onMaxLevelHit:function(){}};t.a=Object(a.connect)(function(e){return{staticAddress:l.Y(e)}},c)(h)},2025:function(e,t,r){"use strict";t.a=u;var n=r(0),i=r.n(n),o=r(29),a=(r.n(o),r(1096)),s=r(326);function u(e){var t=e.queries,r=e.results,n=e.onBackLevelClick,o=e.onLevelItemClick;return i.a.createElement("div",{className:"shopee-address-picker__list-wrapper",onMouseEnter:s.d.init,onMouseLeave:s.d.restore},t.length>0?i.a.createElement("div",{className:"shopee-address-picker__last-selected-address-level",onClick:n},i.a.createElement(a.a,null),t[t.length-1]):"",i.a.createElement("ul",{className:"shopee-address-picker__current-level-list",onScroll:s.d.prevent,key:t.length},r.map(function(e){return i.a.createElement("li",{className:"shopee-address-picker__current-level-list-item",onClick:o,key:e},e)})))}u.defaultProps={currentLevelList:[]}},2026:function(e,t,r){"use strict";t.a=function(e){var t=e.searchResult,r=e.onSearchResultClick;return i.a.createElement("div",{className:"shopee-address-picker__search-result-list-wrapper"},i.a.createElement("ul",{className:"shopee-address-picker__search-result"},t.map(function(e){return i.a.createElement("li",{className:"shopee-address-picker__search-result-item",key:e.join(""),onClick:function(){r(e)}},e.join(" "))})))};var n=r(0),i=r.n(n),o=r(29);r.n(o)},2027:function(e,t,r){"use strict";var n=r(20);t.a=Object(n.a)({Icon:r(1337),iconClassNames:["icon-shipping-airplane"]})},2028:function(e,t,r){"use strict";var n=r(20);t.a=Object(n.a)({Icon:r(1334),iconClassNames:["icon-preorder"]})},2029:function(e,t,r){"use strict";t.a={LOCAL:0,OVERSEAS:1}},2030:function(e,t){e.exports={preorder:"_2NvBJ9",freeShipping:"_2uptpW",freeShippingText:"_2Dh7xS",shippingBlock:"_1fLksi",shippingBlockLabel:"_2yptFM",shippingBlockContent:"_1C1eci",shippingBlockDetail:"c_Q0B9",shippingBlockRow:"OR5YBx",fromTo:"V8ZJDZ",shipFrom:"_1ssXGG",shipFromLabel:"_21uItj",shipToLabel:"MMLlT0",shipToPart:"_24ThEI",shipToText:"_17013z",shipTo:"-TChkK",shipToSelectorWrapper:"_2wGlTU",shippingCost:"_1PSY1D",shippingOptionContainer:"_3tbg7l",currentChannelCost:"_9Vty4c"}}});
//# sourceMappingURL=https://shopee.sg/assets/67.bundle.2739346658a8e272fe03.js.map